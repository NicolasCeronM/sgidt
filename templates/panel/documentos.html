{% extends 'base_app.html' %} {% load static %} {% block title %}Documentos ·
SGIDT{% endblock %} {% block content %}
{% block css %} 
<link rel="stylesheet" href="{% static 'panel/css/toasts.css' %}">
{% endblock %}
<!-- Contenedor para notificaciones -->
<div id="toastContainer" class="toast-container"></div>
<section class="section">
  <div class="container">
    <h1 class="page-title">Gestión de Documentos</h1>

    <!-- Subida de archivos -->
    <div class="upload-section">
      <div class="upload-card">
        <h3>Subir Nuevo Documento</h3>

        <!-- form invisible para CSRF + input -->
        <form
          id="uploadForm"
          method="post"
          enctype="multipart/form-data"
          style="display: none"
        >
          {% csrf_token %}
          <input
            type="file"
            id="fileInput"
            name="files[]"
            accept=".pdf,.jpg,.jpeg,.png"
            multiple
          />
        </form>

        <div class="upload-area" id="uploadArea">
          <i class="fas fa-cloud-upload-alt"></i>
          <p>Arrastra archivos aquí o haz clic para seleccionar</p>
          <p class="upload-hint">
            Formatos soportados: PDF, JPG, PNG (máx. 10MB)
          </p>
          <input
            type="file"
            id="fileInputShadow"
            accept=".pdf,.jpg,.jpeg,.png"
            multiple
            hidden
          />
        </div>
        <button class="btn btn-primary" id="btnSelect">
          <i class="fas fa-plus"></i> Seleccionar Archivos
        </button>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters-section">
      <div class="filters-grid">
        <div class="filter-group">
          <label for="dateFrom">Fecha desde:</label>
          <input type="date" id="dateFrom" class="form-input" />
        </div>
        <div class="filter-group">
          <label for="dateTo">Fecha hasta:</label>
          <input type="date" id="dateTo" class="form-input" />
        </div>
        <div class="filter-group">
          <label for="docType">Tipo:</label>
          <select id="docType" class="form-select">
            <option value="">Todos</option>
            <option value="factura">Factura</option>
            <option value="boleta">Boleta</option>
            <option value="nota-credito">Nota de Crédito</option>
          </select>
        </div>
        <div class="filter-group">
          <label for="docStatus">Estado:</label>
          <select id="docStatus" class="form-select">
            <option value="">Todos</option>
            <option value="validado">Validado</option>
            <option value="pendiente">Pendiente</option>
            <option value="error">Error</option>
          </select>
        </div>
        <button class="btn btn-secondary" id="btnFilter">
          <i class="fas fa-filter"></i> Filtrar
        </button>
      </div>
    </div>

    <!-- Tabla de documentos -->
    <div class="table-container">
      <table class="documents-table">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Tipo</th>
            <th>Folio</th>
            <th>RUT Emisor</th>
            <th>Monto</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="documentsTableBody">
          <!-- Se completa por script -->
        </tbody>
      </table>
    </div>
  </div>
</section>

<script src="{% static 'panel/js/panel_documentos.js' %}"></script>
{% endblock %}

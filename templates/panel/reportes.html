{% extends 'base_app.html' %} {% load static %} {% block title %}Reportes ·
SGIDT{% endblock %} {% block css %}
<link
  rel="stylesheet"
  href="{% static 'reportes/css/reportes.css' %}?v=2"
/>
{% endblock %} {% block content %}
<div id="toastContainer" class="toast-container"></div>

<section class="docs-page" aria-labelledby="docs-title">
  <div class="docs-container">
    
    <header class="page-header">
      <h1 id="docs-title" class="docs-title">Reportes</h1>
    </header>

    <section class="card filters" aria-labelledby="filter-title">
      <h2 id="filter-title" class="card-title">Generar Reporte</h2>
      <div class="filters-grid" id="filters-container">
        <div class="f-item">
          <label for="monthSelector">Mes</label>
          <div class="f-input">
            <i class="fas fa-calendar-alt"></i>
            <select id="monthSelector" class="form-control"></select>
          </div>
        </div>
        <div class="f-item">
          <label for="yearSelector">Año</label>
          <div class="f-input">
            <i class="fas fa-calendar-check"></i>
            <select id="yearSelector" class="form-control"></select>
          </div>
        </div>

        <div class="f-actions">
          <button id="exportCsvBtn" class="btn btn-secondary">
            <i class="fas fa-file-csv"></i>
            <span>Exportar CSV</span>
          </button>
          <button id="exportExcelBtn" class="btn btn-primary">
            <i class="fas fa-file-excel"></i>
            <span>Exportar Excel</span>
          </button>
        </div>
      </div>
    </section>

    <section class="kpi-grid" aria-label="Métricas clave">
      <article class="card kpi-card kpi-ingresos">
        <div class="kpi-icon-wrapper">
          <i class="fas fa-arrow-up"></i>
        </div>
        <div class="kpi-content">
          <span class="kpi-title">Total Ingresos</span>
          <span class="kpi-value" id="kpiIngresos">--</span>
        </div>
      </article>

      <article class="card kpi-card kpi-gastos">
        <div class="kpi-icon-wrapper">
          <i class="fas fa-arrow-down"></i>
        </div>
        <div class="kpi-content">
          <span class="kpi-title">Total Gastos</span>
          <span class="kpi-value" id="kpiGastos">--</span>
        </div>
      </article>

      <article class="card kpi-card kpi-resultado">
        <div class="kpi-icon-wrapper">
          <i class="fas fa-balance-scale"></i>
        </div>
        <div class="kpi-content">
          <span class="kpi-title">Resultado del Periodo</span>
          <span class="kpi-value" id="kpiResultado">--</span>
        </div>
      </article>
    </section>

    <section class="chart-grid" aria-label="Visualizaciones">
      <article class="card chart-card" id="chart1-container">
        <h3 class="card-title">Ingresos vs. Gastos</h3>
        <div id="ingresosVsGastosChart" class="chart-loader">
          </div>
      </article>
      <article class="card chart-card" id="chart2-container">
        <h3 class="card-title">Análisis de IVA</h3>
        <div id="analisisIvaChart" class="chart-loader">
          </div>
      </article>
    </section>

    <section class="card table-card" aria-labelledby="table-title">
      <h2 id="table-title" class="card-title">Detalle de Documentos</h2>
      <div class="table-wrap">
        <table class="table">
          <thead>
            <tr>
              <th>Folio</th>
              <th>Tipo de Documento</th>
              <th>Fecha de Emisión</th>
              <th class="num">Monto Total</th>
            </tr>
          </thead>
          <tbody id="reportTableBody">
            </tbody>
        </table>
      </div>
      <div id="tbl-skeleton" class="table-skeleton" hidden>
        <div></div><div></div><div></div>
      </div>
      <div id="tbl-empty" class="empty" hidden>
        <i class="fas fa-chart-pie empty-illu"></i>
        <p class="empty-text">Sin datos para el periodo seleccionado.</p>
        <p class="empty-text-secondary">
          Selecciona un mes y año para generar el reporte.
        </p>
      </div>
    </section>

  </div>
</section>
{% endblock %} {% block js %}
<script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script
  type="module"
  src="{% static 'reportes/js/reportes.js' %}?v=2"
></script>
{% endblock %}

